<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Results</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        
        <% if (locals.result) { %>
            <div class="score-card">
                <h2>Hi <%= result.username %>, You're Done!</h2>
                <p class="score">Your Score: <%= result.score %> / <%= result.total %></p>
            </div>
        <% } %>

        <h1>All Past Results</h1>
        <table>
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Score</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
              <% if (locals.allResults && allResults.length > 0) { %>
                  <% allResults.sort((a, b) => new Date(b.date) - new Date(a.date)).forEach(res => { %>
                      <tr>
                          <td><%= res.username %></td>
                          <td><%= res.score %> / <%= res.total %></td>
                          <td><%= new Date(res.date).toLocaleString() %></td>
                      </tr>
                  <% }); %>
              <% } else { %>
                  <tr>
                      <td colspan="3">No results found.</td>
                  </tr>
              <% } %>
          </tbody>
        </table>
        <a href="/" class="home-link">Back to Home</a>
    </div>
</body>
</html>